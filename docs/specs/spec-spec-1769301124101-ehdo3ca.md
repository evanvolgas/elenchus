# Specification: Enable Elenchus to properly detect and analyze Pyt...

## Overview

- **Epic ID**: epic-1769300705114-lnth312
- **Version**: 1
- **Readiness**: 82%

## Problem Statement

Enable Elenchus to properly detect and analyze Python, TypeScript, PHP, and Go projects. Currently Python detection fails for pyproject.toml-based projects (especially uv-managed). This blocks accurate codebase analysis needed for spec generation.

## User Persona

Both Elenchus users analyzing their own codebases and AI agents using Elenchus to understand project structure before generating specs.

## Success Metrics

- **Criterion: [ ] `hasTests: true` when `tes...**: [ ] `hasTests: true` when `tests/test_*.py` files exist
- **Criterion: [ ] `hasLinting: true` when `[...**: [ ] `hasLinting: true` when `[tool.ruff]` or similar configured
- **Criterion: [ ] `dependencies` populated f...**: [ ] `dependencies` populated from pyproject.toml

## Out of Scope

- Deep dependency resolution (just detect dependencies from manifest files). Full AST parsing of source code. Support for less common package managers. Migration tools.

## Execution Plan

### Research

Analyze requirements and codebase patterns

**Tasks**:
- Analyze epic requirements and identify implementation approach (researcher)
- Identify relevant existing patterns and files (researcher)

*Checkpoint: Validate research findings before architecture*

### Architecture

Design technical approach and component structure

**Tasks**:
- Design component structure and data flow (system-architect)

*Checkpoint: Validate architecture before implementation*

### Implementation

Build the POC

**Tasks**:
- Implement core functionality (coder)

*Checkpoint: Review implementation before testing*

### Testing

Write and run tests

**Tasks**:
- Write unit and integration tests (tester)

### Review

Code review and final validation

**Tasks**:
- Review code quality, security, and best practices (reviewer)

*Checkpoint: Final review before delivery*

## Acceptance Criteria

### ac-1: [ ] `hasTests: true` when `tests/test_*.py` files ...

- **Given**: The POC is implemented
- **When**: The user interacts with the feature
- **Then**: [ ] `hasTests: true` when `tests/test_*.py` files exist

### ac-2: [ ] `hasLinting: true` when `[tool.ruff]` or simil...

- **Given**: The POC is implemented
- **When**: The user interacts with the feature
- **Then**: [ ] `hasLinting: true` when `[tool.ruff]` or similar configured

### ac-3: [ ] `dependencies` populated from pyproject.toml...

- **Given**: The POC is implemented
- **When**: The user interacts with the feature
- **Then**: [ ] `dependencies` populated from pyproject.toml

### ac-4: [ ] `frameworks` detects FastAPI, Pydantic, etc....

- **Given**: The POC is implemented
- **When**: The user interacts with the feature
- **Then**: [ ] `frameworks` detects FastAPI, Pydantic, etc.

### ac-5: [ ] Convention examples use Python patterns (`test...

- **Given**: The POC is implemented
- **When**: The user interacts with the feature
- **Then**: [ ] Convention examples use Python patterns (`test_*.py`, `__init__.py`)

### ac-6: [ ] Test coverage percentage parsed from coverage ...

- **Given**: The POC is implemented
- **When**: The user interacts with the feature
- **Then**: [ ] Test coverage percentage parsed from coverage reports if available

### ac-7: [ ] Works for both `pyproject.toml` and legacy `se...

- **Given**: The POC is implemented
- **When**: The user interacts with the feature
- **Then**: [ ] Works for both `pyproject.toml` and legacy `setup.py` projects

### ac-8: Project with pyproject.toml + [tool.pytest] → hasT...

- **Given**: The POC is implemented
- **When**: The user interacts with the feature
- **Then**: Project with pyproject.toml + [tool.pytest] → hasTests: true

### ac-9: Project with pyproject.toml + [tool.ruff] → hasLin...

- **Given**: The POC is implemented
- **When**: The user interacts with the feature
- **Then**: Project with pyproject.toml + [tool.ruff] → hasLinting: true

### ac-10: Project with pyproject.toml + [tool.mypy] → no "Ty...

- **Given**: The POC is implemented
- **When**: The user interacts with the feature
- **Then**: Project with pyproject.toml + [tool.mypy] → no "Type Safety" risk

### ac-11: Project with FastAPI in dependencies → frameworks:...

- **Given**: The POC is implemented
- **When**: The user interacts with the feature
- **Then**: Project with FastAPI in dependencies → frameworks: ["FastAPI"]

### ac-12: Project with tests/test_*.py → convention examples...

- **Given**: The POC is implemented
- **When**: The user interacts with the feature
- **Then**: Project with tests/test_*.py → convention examples show Python patterns

## Estimates

- **Duration**: 85 minutes
- **Cost**: $0.95
- **Confidence**: medium

## Risks

- **Variety of manifest file formats across languages. Large PHP monorepos may have performance issues. Edge cases with polyglot repos containing multiple language manifests.** (medium/medium)
  - Mitigation: Monitor during implementation
- **Scope may expand during implementation** (medium/medium)
  - Mitigation: Use checkpoints to validate scope at each phase
